<?xml version="1.0" encoding="utf-8" ?>
<ur:UraniumContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:ICD.ViewModels"
             xmlns:m="clr-namespace:ICD.Models"
             xmlns:ur="http://schemas.enisn-projects.io/dotnet/maui/uraniumui"
             xmlns:mat="http://schemas.enisn-projects.io/dotnet/maui/uraniumui/material"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             x:Class="ICD.Views.DrugDetailPage"
             Shell.FlyoutBehavior="Disabled"
             Shell.FlyoutItemIsVisible="False"
             Shell.TabBarIsVisible="False"
             FlowDirection="LeftToRight">
    <!--<ur:UraniumContentPage.Attachments>
        <mat:BottomSheetView  
            DisablePageWhenOpened="True"
            CloseOnTapOutside="True"
            Grid.Row="3">
            
        <mat:BottomSheetView.Header>
                <Grid BackgroundColor="Chocolate" 
                        HorizontalOptions="FillAndExpand">
                    <Label TextColor="Chocolate" 
                           HorizontalOptions="FillAndExpand"
                           Text="header"/>
                </Grid>
            </mat:BottomSheetView.Header>
        
            <mat:BottomSheetView.Body>
                <VerticalStackLayout BackgroundColor="Chocolate" 
                        HorizontalOptions="FillAndExpand">
                    <Label TextColor="White" 
                           HorizontalOptions="CenterAndExpand"
                           Text="header"/>
                    <Label TextColor="White" 
                           HorizontalOptions="CenterAndExpand"
                           Text="header"/>
                    <Label TextColor="White" 
                           HorizontalOptions="CenterAndExpand"
                           Text="header"/>
                    <Label TextColor="White" 
                           HorizontalOptions="CenterAndExpand"
                           Text="header"/>
                </VerticalStackLayout>
            </mat:BottomSheetView.Body>
        </mat:BottomSheetView>
    </ur:UraniumContentPage.Attachments>-->

    <ur:UraniumContentPage.Resources>
        <ControlTemplate x:Key="RadioButtonTemplate">
            <Border Stroke="Green"
                        StrokeThickness="2"
                        x:Name="b"
                        StrokeShape="RoundRectangle 10"
                        BackgroundColor="Green"
                        HeightRequest="40"
                        WidthRequest="150"
                        HorizontalOptions="CenterAndExpand"
                        VerticalOptions="CenterAndExpand">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="2*"/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <Label Grid.Row="0"
                               Text="{TemplateBinding Content}" 
                               FontSize="15"
                               TextColor="White"
                               x:Name="lb"
                               VerticalOptions="CenterAndExpand"
                               HorizontalOptions="CenterAndExpand"/>
                    <BoxView Grid.Row="1"
                                 x:Name="line"
                                 Color="White"
                                 WidthRequest="130"
                                 HeightRequest="1"/>
                </Grid>
                <VisualStateManager.VisualStateGroups>
                    <VisualStateGroupList>
                        <VisualStateGroup x:Name="CheckedStates">
                            <VisualState x:Name="Checked">
                                <VisualState.Setters>
                                    <Setter Property="BackgroundColor"
                                                Value="MediumSeaGreen" />
                                    <Setter TargetName="lb"
                                                Property="Label.TextColor"
                                                Value="White" />
                                    <Setter TargetName="line"
                                                Property="BoxView.Color"
                                                Value="White" />
                                </VisualState.Setters>
                            </VisualState>
                            <VisualState x:Name="Unchecked">
                                <VisualState.Setters>
                                    <Setter Property="BackgroundColor"
                                                Value="White" />
                                    <Setter TargetName="lb"
                                                Property="Label.TextColor"
                                                Value="MediumSeaGreen" />
                                    <Setter TargetName="line"
                                                Property="BoxView.Color"
                                                Value="MediumSeaGreen" />
                                </VisualState.Setters>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateGroupList>
                </VisualStateManager.VisualStateGroups>
            </Border>
        </ControlTemplate>

        <Style TargetType="RadioButton">
            <Setter Property="ControlTemplate"
                    Value="{StaticResource RadioButtonTemplate}" />
        </Style>
    </ur:UraniumContentPage.Resources>
    <ScrollView Grid.Row="3">
        <VerticalStackLayout >
            <Label Background="WhiteSmoke"
            Grid.Row="0"
            Margin="5,0,0,0"
                TextDecorations="Underline"
            VerticalOptions="CenterAndExpand"
            TextColor="{StaticResource MainColor}"
            Text="Scientific Name" 
            FontSize="30"/>

            <Label 
            Grid.Row="1"
            Margin="5,0,0,0"
            VerticalOptions="CenterAndExpand"
            TextColor="{StaticResource SubMainColor}"
            Text="{Binding DrugName}" 
            FontSize="20"/>
            <Label 
            Grid.Row="2"
            Margin="5,0,0,0"
            VerticalOptions="CenterAndExpand"
            TextColor="{StaticResource SubMainColor}"
            Text="{Binding AdministrationRoute}" 
            FontSize="15"/>

            <Label 
            Grid.Row="3" Background="WhiteSmoke"
            Margin="5,20,0,0" 
            VerticalOptions="CenterAndExpand"
            TextColor="{StaticResource MainColor}"
            TextDecorations="Underline"
            Text="Trade Names" 
            FontSize="30"/>

            <CollectionView Grid.Row="4" 
                SelectionMode="Single"
                        x:Name="cv2"
                ItemsSource="{Binding TradeDrugs}"
                EmptyView="Not Found">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="vm:HomeVM">
                        <Border 
                        StrokeThickness="0.5"
                        Padding="5"
                        Margin="5,5,5,0">
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroupList>
                                    <VisualStateGroup Name="CommonStates">
                                        <VisualState Name="Normal">
                                            <VisualState.Setters>
                                                <Setter Property="BackgroundColor" Value="White" />
                                            </VisualState.Setters>
                                        </VisualState>

                                        <VisualState Name="Focused">
                                            <VisualState.Setters>
                                                <Setter Property="BackgroundColor" Value="White" />
                                            </VisualState.Setters>
                                        </VisualState>

                                        <VisualState Name="Disabled">
                                            <VisualState.Setters>
                                                <Setter Property="BackgroundColor" Value="White" />
                                            </VisualState.Setters>
                                        </VisualState>

                                        <VisualState Name="PointerOver">
                                            <VisualState.Setters>
                                                <Setter Property="BackgroundColor" Value="White" />
                                            </VisualState.Setters>
                                        </VisualState>

                                        <VisualState Name="Selected">
                                            <VisualState.Setters>
                                                <Setter Property="BackgroundColor" Value="White" />
                                            </VisualState.Setters>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateGroupList>
                            </VisualStateManager.VisualStateGroups>

                            <Grid  ColumnDefinitions="*,auto">
                                <VerticalStackLayout
                                    x:DataType="m:TradeDrug"
                                    Grid.Column="0">
                                    <Label 
                                     TextColor="{StaticResource SubMainColor}"
                                       Text="{Binding TradeDrugName}"
                                       FontAttributes="Italic"
                                       FontSize="20"/>
                                </VerticalStackLayout>
                                <!--<Grid RowDefinitions="auto,*"
                                      Grid.Column="1">
                                <mat:CheckBox
                                        IconColor="DarkSlateBlue"
                                        BorderColor="DarkSlateBlue"
                                        HorizontalOptions="CenterAndExpand"
                                        VerticalOptions="CenterAndExpand"
                                        Margin="5"
                                        BoxSizeRequest="23"
                                        CheckChangedCommand="{Binding Source={RelativeSource AncestorType={x:Type vm:DrugDetailVM}} ,Path=UpdateCheckedDrugCommand}"
                                        CommandParameter="{Binding .}"
                                        CornerRadius="25">
                                </mat:CheckBox>
                                <Button
                                        Grid.Row="1"
                                        HeightRequest="45"
                                        IsVisible="{Binding IsButtonVisible}"
                                        WidthRequest="50"
                                        BackgroundColor="Transparent"
                                        ImageSource="share"
                                        Command="{Binding Source={RelativeSource AncestorType={x:Type vm:HomeVM}},Path=ShareDrugCommand}"
                                        CommandParameter="{Binding .}">
                                </Button>
                            </Grid>-->
                            </Grid>
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="5,0,0,5"/>
                            </Border.StrokeShape>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <Grid Grid.Row="5"
              ColumnDefinitions="*,*"
              Background="WhiteSmoke">
                <Label 
                Grid.Column="0"
                Margin="5,0,0,0"
                VerticalOptions="CenterAndExpand"
                TextColor="{StaticResource MainColor}"
                TextDecorations="Underline"
                Text="ICD-10" 
                FontSize="30"/>
                <ImageButton
                Grid.Column="1"
                IsVisible="{Binding IsButtonVisible}"
                HeightRequest="40"
                WidthRequest="40"
                HorizontalOptions="EndAndExpand"
                Margin="0,0,20,0"
                VerticalOptions="CenterAndExpand"
                BackgroundColor="Transparent"
                Command="{Binding Source={RelativeSource AncestorType={x:Type vm:DrugDetailVM}},Path=ShareCheckedDrugsCommand}"
                CommandParameter="{Binding .}"
                Source="share">
                    <ImageButton.Behaviors>
                        <toolkit:IconTintColorBehavior TintColor="{StaticResource SubMainColor}"/>
                    </ImageButton.Behaviors>
                </ImageButton>

            </Grid>

            <CollectionView Grid.Row="6" 
                SelectionMode="Single"
                ItemsSource="{Binding Drugs}"
                EmptyView="Not Found">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Border x:DataType="m:Drug"
                        StrokeThickness="0.5"
                        Padding="5"
                        Margin="5,5,5,0">
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroupList>
                                    <VisualStateGroup Name="CommonStates">
                                        <VisualState Name="Normal">
                                            <VisualState.Setters>
                                                <Setter Property="BackgroundColor" Value="White" />
                                            </VisualState.Setters>
                                        </VisualState>

                                        <VisualState Name="Focused">
                                            <VisualState.Setters>
                                                <Setter Property="BackgroundColor" Value="White" />
                                            </VisualState.Setters>
                                        </VisualState>

                                        <VisualState Name="Disabled">
                                            <VisualState.Setters>
                                                <Setter Property="BackgroundColor" Value="White" />
                                            </VisualState.Setters>
                                        </VisualState>

                                        <VisualState Name="PointerOver">
                                            <VisualState.Setters>
                                                <Setter Property="BackgroundColor" Value="White" />
                                            </VisualState.Setters>
                                        </VisualState>

                                        <VisualState Name="Selected">
                                            <VisualState.Setters>
                                                <Setter Property="BackgroundColor" Value="White" />
                                            </VisualState.Setters>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateGroupList>
                            </VisualStateManager.VisualStateGroups>
                            <Grid ColumnDefinitions="*,auto">
                                <Grid Grid.Column="0"  RowDefinitions="*,auto">
                                    <Label 
                                TextColor="{StaticResource SubMainColor}" 
                                       Text="{Binding Indication}"
                                       Grid.Row="0"
                                       FontAttributes="Italic"
                                       FontSize="20"/>
                                    <Label 
                                TextColor="{StaticResource SubMainColor}"
                                       Text="{Binding DiagnosisCode}"
                                       Grid.Row="1"
                                       FontAttributes="Italic"
                                       FontSize="20"/>
                                </Grid>
                                <Grid RowDefinitions="auto,*"
                                      Grid.Column="1">
                                    <mat:CheckBox
                                        IconColor="{StaticResource SubMainColor}"
                                        BorderColor="{StaticResource SubMainColor}"
                                        HorizontalOptions="CenterAndExpand"
                                        VerticalOptions="CenterAndExpand"
                                        BoxSizeRequest="30"
                                    Margin="5"
                                        CheckChangedCommand="{Binding Source={RelativeSource AncestorType={x:Type vm:DrugDetailVM}} ,Path=UpdateCheckedDrugCommand}"
                                        CommandParameter="{Binding .}"
                                        CornerRadius="25">
                                    </mat:CheckBox>
                                    <ImageButton
                                        Grid.Row="1"
                                        HorizontalOptions="CenterAndExpand"
                                        VerticalOptions="CenterAndExpand"
                                        Source="copy4"
                                    HeightRequest="30"
                                    WidthRequest="30"
                                    Margin="0,5,15,0"
                                        Command="{Binding Source={RelativeSource AncestorType={x:Type vm:DrugDetailVM}},Path=CopyDrugCommand}"
                                        CommandParameter="{Binding .}">
                                        <ImageButton.Behaviors>
                                            <toolkit:IconTintColorBehavior TintColor="{StaticResource SubMainColor}"/>
                                        </ImageButton.Behaviors>
                                    </ImageButton>
                                </Grid>
                            </Grid>
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="5,0,0,5"/>
                            </Border.StrokeShape>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>


            <!--<VerticalStackLayout Grid.Row="3">
            -->
            <!--<Border StrokeShape="RoundRectangle 10"
                        StrokeThickness="0"
                    Margin="5,0,5,0">
                    <controls:MTAdView x:Name="myAds">
                        <controls:MTAdView.HeightRequest>
                            <OnIdiom 
                                Phone="50"
                                Tablet="90"
                                Desktop="90"/>
                        </controls:MTAdView.HeightRequest>

                    </controls:MTAdView>
                </Border>-->
            <!--

            <Border
                   Margin="5"
                   StrokeShape="RoundRectangle 10"
                   BackgroundColor="ForestGreen"
                   Padding="0">
                <Label
                        HorizontalOptions="CenterAndExpand"
                        VerticalOptions="CenterAndExpand"
                        FontSize="25"
                        TextColor="White"
                        Text="Powered By : Amr Yakout"/>
            </Border>
        </VerticalStackLayout>-->
        </VerticalStackLayout>
    </ScrollView>

</ur:UraniumContentPage>